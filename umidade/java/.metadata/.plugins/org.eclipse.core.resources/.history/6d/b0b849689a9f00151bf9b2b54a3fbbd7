package br.edu.ifba.se.babycare.conector;

import br.edu.ifba.se.babycare.IComunicacaoRF;
import br.edu.ifba.se.babycare.Informacao;

public class SingleConector {
	
	private static final String PORTA = "/dev/ttyUSB0";
	private static IComunicacaoRF comRF = null;
	//Terceira Unidade
	private static Informacao info;
	
	public static void iniciarComunicacaoRF(String libPath){
		comRF = FabricaConectores.getConector(libPath);
		if(comRF.iniciar(PORTA) == 0){
		   System.out.println("Acesso a sensores iniciado com sucesso!");	
		   dispensarPrimeirasLeituras();
		} else{
			System.out.println("NÃ£o foi possivel acesso a sensores!");
		}
	}
	
	public static void dispensarPrimeirasLeituras(){
		for(int i = 0; i < 10; i++){
			comRF.ler();
			
			System.out.println("dispensando leitura [B/T/M]: "+ comRF.getBatimentos()+ "/"+
			comRF.getTemperatura() + "/" + comRF.getMovimento());
			try {
				//Mudar pra 50 na terceira unidade
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}
	
	//Terceira Unidade
	public static int ler(){
		
	}
	
	public static IComunicacaoRF getConector(){
		return comRF;
	}

}
